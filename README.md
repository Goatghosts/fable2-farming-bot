# Fable 2 farming bot (PC / Xenia)

Скрипт захватывает область экрана, отслеживает маркеры мини-игры по цветам и нажимает **A** через виртуальный **Xbox 360**-геймпад.  
Лучше всего скрипт автоматизирует работу в кузне, но так же может помочь в работе дровосека.  
Скрипт целиком и полностью написал ChatGPT

## Требования
- Windows 10/11
- Python 3.10+
- Игра в оконном / borderless режиме

## Установка
1) (Опционально) создать venv:
- `python -m venv .venv`
- `.\.venv\Scripts\activate`

2) Поставить зависимости:
- `pip install -r requirements.txt`

## Запуск скрипта
- `python main.py`

При первом запуске откроется окно выбора оси (траектории):
- **LMB** — добавить точку
- **RMB** — удалить последнюю
- **Enter** — завершить
- **Esc** — отмена

После калибровки рядом со скриптом сохранится конфиг: `config.json`.

## Первый запуск (проверено Xenia Canary):
1) Открываем игру в окне
2) Запускаем мини-игру
3) Отключаем свой основной геймпад, игра должна поставиться на паузу
4) Запускаем скрипт, выделяем любую зону, жмем **Enter**
5) Жмем **T**, чтобы снять игру с паузы
6) Жмем **R** и теперь уже аккуратно выделяем всю кривую, по которой бегает белая точка
7) Жмем **Enter**
8) Возможно, если вы работаете дровосеком, придется предварительно еще раз нажать на **T**, потому что скрипт реагирует только на зеленую область.
9) Идем пить чай.

## Управление во время работы
- **Q** — выход
- **D** — переключить отладочный оверлей
- **T** — тестовое нажатие A
- **R** — заново выбрать ось (перекалибровка)

## Настройка
Основные параметры лежат в `config.json`:
- `roi_padding` — расширение ROI вокруг выбранной оси
- `axis_resample_points` — количество точек дискретизации оси
- `axis_sample_radius` — радиус семплирования вокруг оси (0 = строго по линии)
- `green_hsv_low/high` — пороги зелёной зоны (HSV)
- `white_hsv_low/high`, `white_v_min`, `white_s_max` — пороги белого маркера
- `lead_ms` — упреждение по времени (предсказание положения)
- `press_ms` — длительность удержания A
- `cooldown_ms` — минимальный интервал между нажатиями
- `show_debug` — отладочный режим

Дополнительно в шапке кода есть константа:
- `A_PRE_PRESS_DELAY_MS` — задержка (мс) перед нажатием **A**